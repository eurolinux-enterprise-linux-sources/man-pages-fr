.\" Copyright (c) 1993 by Thomas Koenig (ig25@rz.uni-karlsruhe.de)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one.
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\" License.
.\" Modified Sat Jul 24 17:51:15 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified 11 May 1998 by Joseph S. Myers (jsm28@cam.ac.uk)
.\" Modified 14 May 2001, 23 Sep 2001 by aeb
.\" 2004-12-20, mtk
.\"
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH SYSTEM 3 "20 décembre 2004" "" "Manuel du programmeur Linux"
.SH NOM
system \- Exécuter une commande shell
.SH SYNOPSIS
.nf
\fB#include <stdlib.h>\fP
.sp
\fBint system(const char *\fP\fIcommand\fP\fB);\fP
.fi
.SH DESCRIPTION
La fonction \fBsystem\fP() exécute la commande indiquée dans \fIcommand\fP en
appelant \fB/bin/sh \-c\fP \fIcommand\fP, et revient après l'exécution complète de
la commande. Durant cette exécution, le signal \fBSIGCHLD\fP est bloqué, et les
signaux \fBSIGINT\fP et \fBSIGQUIT\fP sont ignorés.
.SH "VALEUR RENVOYÉE"
La valeur renvoyée est \-1 en cas d'erreur (par exemple échec de \fBfork\fP(2))
ou le code de retour de la commande en cas de succès. Ce dernier code est
dans le format indiqué dans \fBwait\fP(2). Ainsi, le retour de la commande sera
\fIWEXITSTATUS(status)\fP. Dans le cas où \fI/bin/sh\fP ne peut pas être exécuté,
le code de retour sera identique à celui d'une commande effectuant un
\fIexit(127)\fP.
.PP
Si la valeur de \fIcommand\fP est NULL, \fBsystem\fP() renvoie une valeur non
nulle si le shell est accessible, et zéro sinon.
.PP
\fBsystem\fP() n'affecte pas le statut d'attente des autres processus fils.
.SH CONFORMITÉ
C89, C99, POSIX.1\-2001.
.SH NOTES
.PP
Si la macro de test de fonctionnalité \fB_XOPEN_SOURCE\fP est définie, les
macros décrites dans \fBwait\fP(2) (\fBWEXITSTATUS\fP(), etc.) sont disponibles en
incluant \fI<stdlib.h>\fP.
.PP
Comme mentionné plus haut, \fBsystem\fP() ignore \fBSIGINT\fP et \fBSIGQUIT\fP. Un
programme qui l'appelle en boucle risque de ne pas pouvoir être interrompu,
à moins qu'il ne vérifie le code de retour du fils, par exemple
.br
.nf

    while (qqchose) {
        int ret = system("foo");

        if (WIFSIGNALED(ret) &&
            (WTERMSIG(ret) == SIGINT || WTERMSIG(ret) == SIGQUIT))
                break;
    }
.fi
.PP
N'utilisez jamais \fBsystem\fP() dans un programme avec les privilèges Set\-UID
ou Set\-GID. Des variables d'environnement avec des valeurs étranges peuvent
être utilisées pour corrompre l'intégrité du système. Utilisez les fonctions
de la famille \fBexec\fP(3) à la place, mais pas \fBexeclp\fP(3) ni
\fBexecvp\fP(3). \fBsystem\fP() ne fonctionnera pas correctement avec les
programmes ayant des privilèges fournis par les bits Set\-UID ou Set\-GID sur
les systèmes où \fI/bin/sh\fP est bash version 2, car celui\-ci rejette les
privilèges au démarrage (Debian utilise une version modifiée de bash où ce
comportement est abandonné si on l'invoque sous le nom \fBsh\fP).
.PP
Avec les versions de la glibc antérieures à 2.1.3, la vérification de la
disponibilité de \fI/bin/sh\fP n'était pas faite lorsque \fIcommand\fP était
NULL. Il était toujours supposé être disponible, et \fBsystem\fP() renvoyait
toujours 1 dans ce cas. Depuis glibc 2.1.3, cette vérification est
effectuée, car, même si POSIX.1\-2001 impose aux implémentations conformes de
fournir un shell, ce shell peut ne pas être opérationnel si le programme
appelant a auparavant appelé \fBchroot\fP(2) (ce qui n'est pas spécifié dans
POSIX.1\-2001).
.PP
Il est possible qu'une commande shell renvoie 127, ainsi le code de retour
n'est pas une indication sûre de l'échec de \fBexecve\fP(2).
.SH "VOIR AUSSI"
\fBsh\fP(1), \fBsignal\fP(2), \fBwait\fP(2), \fBexec\fP(3)
.SH COLOPHON
Cette page fait partie de la publication 3.23 du projet \fIman\-pages\fP
Linux. Une description du projet et des instructions pour signaler des
anomalies peuvent être trouvées à l'adresse
<URL:http://www.kernel.org/doc/man\-pages/>.
.SH TRADUCTION
Depuis 2010, cette traduction est maintenue à l'aide de l'outil
po4a <URL:http://po4a.alioth.debian.org/> par l'équipe de
traduction francophone au sein du projet perkamon
<URL:http://alioth.debian.org/projects/perkamon/>.
.PP
Christophe Blaess <URL:http://www.blaess.fr/christophe/> (1996-2003),
Alain Portal <URL:http://manpagesfr.free.fr/> (2003-2006).
Nicolas François et l'équipe francophone de traduction de Debian\ (2006-2009).
.PP
Veuillez signaler toute erreur de traduction en écrivant à
<perkamon\-l10n\-fr@lists.alioth.debian.org>.
.PP
Vous pouvez toujours avoir accès à la version anglaise de ce document en
utilisant la commande
«\ \fBLC_ALL=C\ man\fR \fI<section>\fR\ \fI<page_de_man>\fR\ ».
